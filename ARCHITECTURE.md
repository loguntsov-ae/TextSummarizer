# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Text Summarizer

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±—â–∏–π –æ–±–∑–æ—Ä](#–æ–±—â–∏–π-–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
- [–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö](#–ø–æ—Ç–æ–∫-–¥–∞–Ω–Ω—ã—Ö)
- [–î–∏–∑–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è](#–¥–∏–∑–∞–π–Ω-—Ä–µ—à–µ–Ω–∏—è)
- [–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å](#–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)

---

## –û–±—â–∏–π –æ–±–∑–æ—Ä

Text Summarizer –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–¥–∞—á. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω **Producer-Consumer** —á–µ—Ä–µ–∑ Redis Pub/Sub –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **Separation of Concerns** ‚Äî –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **Asynchronous Processing** ‚Äî –¥–æ–ª–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç API
3. **Loose Coupling** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
4. **Extensibility** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. Repository Pattern

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏ (OpenAI, HuggingFace, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Repository –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏.

```python
# –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
class ModelRepository(ABC):
    @abstractmethod
    async def summarize(self, text: str) -> str:
        pass

# –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏
class OpenAIRepository(ModelRepository):
    async def summarize(self, text: str) -> str:
        # OpenAI API logic
        
class HuggingFaceRepository(ModelRepository):
    async def summarize(self, text: str) -> str:
        # HuggingFace API logic
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ mock

### 2. Pub/Sub Pattern

**–ü—Ä–æ–±–ª–µ–º–∞:** API Gateway –Ω–µ –¥–æ–ª–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ ML-–º–æ–¥–µ–ª–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10+ —Å–µ–∫—É–Ω–¥).

**–†–µ—à–µ–Ω–∏–µ:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Redis Pub/Sub.

```
API Gateway --> [Redis: tasks channel] --> Worker
Worker --> [Redis: results channel] --> API Gateway
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- API –æ—Ç–≤–µ—á–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- Worker –º–æ–∂–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å ‚Äî –∑–∞–¥–∞—á–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è

### 3. Factory Pattern

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ –≤ runtime –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** Factory —Å–æ–∑–¥–∞–µ—Ç –Ω—É–∂–Ω—ã–π Repository –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è.

```python
def get_repository() -> ModelRepository:
    repo_type = settings.model_backend
    
    if repo_type == "openai":
        return OpenAIRepository()
    elif repo_type == "huggingface":
        return HuggingFaceRepository()
    # ...
```

### 4. WebSocket –¥–ª—è Real-Time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –±–µ–∑ polling.

**–†–µ—à–µ–Ω–∏–µ:** WebSocket connection –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

```javascript
// –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
const ws = new WebSocket('ws://localhost:8000/ws');
ws.onmessage = (event) => {
    const update = JSON.parse(event.data);
    updateUI(update);
};
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### API Gateway (`api_gateway/`)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏–µ–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á –≤ Redis
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞–º

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- FastAPI ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- SQLAlchemy ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- Pydantic ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- aioredis ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Redis –∫–ª–∏–µ–Ω—Ç

**Endpoints:**
```
POST   /summarize        ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
GET    /tasks            ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
DELETE /tasks/{id}       ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
WS     /ws               ‚Äî WebSocket –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
GET    /                 ‚Äî Web UI
```

### Worker (`worker/`)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–∑ Redis
- –í—ã–∑–æ–≤ ML-–º–æ–¥–µ–ª–∏ –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ –≤ Redis
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
worker/
‚îú‚îÄ‚îÄ main.py              # Entry point, –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ interfaces.py    # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ factory.py       # Factory –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Repository
‚îÇ   ‚îî‚îÄ‚îÄ repositories/    # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ openai_api.py
‚îÇ       ‚îú‚îÄ‚îÄ huggingface.py
‚îÇ       ‚îî‚îÄ‚îÄ local_t5.py
```

### Redis

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- Message broker –¥–ª—è Pub/Sub
- –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (`tasks` channel)
- –û—á–µ—Ä–µ–¥—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (`results` channel)

**–ü–æ—á–µ–º—É Redis?**
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Pub/Sub
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Database (SQLite/PostgreSQL)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–°—Ö–µ–º–∞:**
```sql
CREATE TABLE tasks (
    id VARCHAR PRIMARY KEY,
    text TEXT NOT NULL,
    summary TEXT,
    status VARCHAR,  -- queued, processing, done, failed
    created_at TIMESTAMP
);
```

---

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

```mermaid
sequenceDiagram
    participant User
    participant UI
    participant API
    participant DB
    participant Redis
    participant Worker
    
    User->>UI: –í–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç
    UI->>API: POST /summarize
    API->>DB: INSERT task (status=queued)
    API->>Redis: PUBLISH tasks {task_id, text}
    API->>UI: Response {task_id, status}
    API->>UI: WebSocket notify (new task)
    
    Redis->>Worker: Subscribe: new task
    Worker->>Worker: Summarize text
    Worker->>Redis: PUBLISH results {task_id, summary}
    
    Redis->>API: Subscribe: result
    API->>DB: UPDATE task (status=done, summary)
    API->>UI: WebSocket notify (task done)
    UI->>User: –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ Worker –ø–∞–¥–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
1. –ó–∞–¥–∞—á–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "queued" –≤ –ë–î
2. –î—Ä—É–≥–æ–π Worker –º–æ–∂–µ—Ç –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å –∑–∞–¥–∞—á—É
3. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º

---

## –î–∏–∑–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—á–µ–º—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã?

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ú–æ–Ω–æ–ª–∏—Ç —Å Celery

**–í—ã–±–æ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:**
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ Worker
- ‚úÖ –†–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏/—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–æ–≤
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (—Ä–µ—à–∞–µ—Ç—Å—è Docker Compose)

### –ü–æ—á–µ–º—É FastAPI?

- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket
- Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–æ—á–µ–º—É SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?

- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è development –∏ demo
- –ù—É–ª–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –õ–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL –¥–ª—è production

### –ü–æ—á–µ–º—É Redis Pub/Sub, –∞ –Ω–µ RabbitMQ?

**Redis:**
- ‚úÖ –ü—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚úÖ –ú–µ–Ω—å—à–µ overhead
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ use case
- ‚ùå –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

**RabbitMQ:**
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
- ‚úÖ –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ routing
- ‚ùå –¢—è–∂–µ–ª–µ–µ –∏ —Å–ª–æ–∂–Ω–µ–µ

–î–ª—è production –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å RabbitMQ.

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**API Gateway:**
```bash
docker-compose up --scale api-gateway=3
```
–î–æ–±–∞–≤–∏—Ç—å Load Balancer (nginx) –ø–µ—Ä–µ–¥ API Gateway.

**Worker:**
```bash
docker-compose up --scale worker=5
```
–ö–∞–∂–¥—ã–π Worker –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –º–æ—â–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏

### Bottlenecks

1. **ML API rate limits** ‚Äî OpenAI/HuggingFace –∏–º–µ—é—Ç –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
   - –†–µ—à–µ–Ω–∏–µ: self-hosted –º–æ–¥–µ–ª–∏, –±–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤
   
2. **SQLite** ‚Äî –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
   - –†–µ—à–µ–Ω–∏–µ: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL
   
3. **Redis memory** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏
   - –†–µ—à–µ–Ω–∏–µ: —É–≤–µ–ª–∏—á–∏—Ç—å RAM, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis Streams

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] Connection pooling –¥–ª—è –ë–î
- [ ] Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- [ ] Compression –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∏ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è)

- Request rate, latency
- Task processing time
- Queue depth
- Error rate
- Active WebSocket connections

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- Loki –¥–ª—è –ª–æ–≥–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

logger = logging.getLogger(__name__)
logger.info(f"Task {task_id} received")
logger.error(f"Failed to process task {task_id}: {error}")
```

### Health checks

```python
@app.get("/health")
async def health():
    return {"status": "ok", "redis": check_redis(), "db": check_db()}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

- –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è demo)
- WebSocket –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤—Å–µ—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

1. **Authentication:**
   - JWT tokens –¥–ª—è API
   - WebSocket authentication

2. **Rate limiting:**
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è rate limiting

3. **Input validation:**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞
   - Sanitization HTML

4. **API Keys:**
   - –•—Ä–∞–Ω–∏—Ç—å –≤ secrets manager (AWS Secrets, HashiCorp Vault)
   - –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```python
def test_openai_repository():
    repo = OpenAIRepository()
    result = await repo.summarize("test text")
    assert len(result) > 0
```

### Integration —Ç–µ—Å—Ç—ã

```python
async def test_task_flow():
    # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
    response = await client.post("/summarize", json={"text": "..."})
    task_id = response.json()["task_id"]
    
    # –ü–æ–¥–æ–∂–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
    await asyncio.sleep(5)
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    response = await client.get(f"/tasks/{task_id}")
    assert response.json()["status"] == "done"
```

### E2E —Ç–µ—Å—Ç—ã

- Selenium –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI
- WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

---

## Roadmap

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Rate limiting
- [ ] Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è Worker
- [ ] Health checks
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Kubernetes deployment
- [ ] Multi-language support
- [ ] Advanced analytics dashboard
- [ ] User authentication & authorization
- [ ] Webhook callbacks

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Text Summarizer –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:

‚úÖ **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏  
‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ **Clean Architecture** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏  
‚úÖ **Docker** –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è  

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Monitoring & alerting
- PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- Rate limiting
